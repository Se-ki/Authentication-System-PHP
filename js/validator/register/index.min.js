function hasRepeatedLetters(e){if(!e)return!1;const t=/([a-zA-Z])\1{3}/;return t.test(e)}function validateIfCapitalize(e){return!e||e===e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.substring(1)).join(" ")}function containNumbers(e){var t=/[0-9]+/;return!!t.test(e)}function containSpecialCharacters(e){var t=/[!@'';:#$%^&*()\-\/+<>.,?\/\\\|\[\]\{\}]+/;return!!t.test(e)}function containsLetters(e){return!!e&&!/^[0-9]+$/.test(e)}function validatePhilippineMobileNumber(e){if(!e)return!0;if(e.length<11)return!1;var t=/^(09\d{9})$/,l=/^(639\d{9})$/;return!(!t.test(e)&&!l.test(e))}function isValidAddress(e){if(!e)return!0;var t=/^[a-zA-Z0-9,.\-\s]+$/;return t.test(e)}function validateOneSpaceAtTheEnd(e){if(!e)return!1;var t=/^([0-9a-zA-Z,.-]+ )*$/;return t.test(e)}function validateOneSpacePerWord(e){if(!e)return!0;var t=/^[0-9a-zA-Z,.-]+( [0-9a-zA-Z,.-]+)*$/;return t.test(e)}function startInputContainSpace(e){if(!e)return!1;if(" "===e)return!0;var t=/^( [0-9a-zA-Z,.-]+)*$/;return t.test(e)}function passwordValidation(e){return!e||/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}$/.test(e)}document.getElementById("register-form").addEventListener("submit",async e=>{var t=document.querySelector("input[name=firstname]").value,l=document.querySelector("input[name=middlename]").value,a=document.querySelector("input[name=lastname]").value,r=document.querySelector("input[name=suffix]").value,s=document.querySelector("#sex").value,o=document.querySelector("input[name=birthdate]").value,d=document.querySelector("input[name=age]").value,n=document.querySelector("input[name=mobilenum]").value,i=document.querySelector("input[name=email]").value,u=document.querySelector("input[name=country]").value,m=document.querySelector("input[name=province]").value,c=document.querySelector("input[name=city]").value,y=document.querySelector("input[name=purok]").value,p=document.querySelector("input[name=barangay]").value,b=document.querySelector("input[name=street]").value,v=document.querySelector("input[name=zipcode]").value,f=document.querySelector("input[name=username]").value,g=document.querySelector("input[name=password]").value,h=document.querySelector("input[name=confirmpassword]").value;e.preventDefault();const C=new FormData;C.append("firstname",t),C.append("middlename",l),C.append("lastname",a),C.append("suffix",r),C.append("sex",s),C.append("birthdate",o),C.append("age",d),C.append("mobilenum",n),C.append("email",i),C.append("country",u),C.append("province",m),C.append("city",c),C.append("purok",y),C.append("barangay",p),C.append("street",b),C.append("zipcode",v),C.append("username",f),C.append("password",g),C.append("confirmpassword",h);const x=await fetch("/register/store",{method:"POST",body:C}),w=await x.json();return console.log(w),w.ok||"email"!==w.type?w.ok||"username"!==w.type?(document.getElementById("is-valid-username").innerHTML="",document.getElementById("username-label").style.color="",document.getElementById("username").style.border="",document.getElementById("is-valid-email").innerHTML="",document.getElementById("email-label").style.color="",document.getElementById("email").style.border="",document.getElementById("password-strength").innerHTML="",document.querySelectorAll("input").forEach(e=>{e.value=""}),void alert(w.message)):(document.getElementById("is-valid-username").innerHTML=w.message,document.getElementById("username-label").style.color="red",document.getElementById("username").style.border="1px solid red",document.getElementById("is-valid-email").innerHTML="",document.getElementById("email-label").style.color="",void(document.getElementById("email").style.border="")):(document.getElementById("is-valid-email").innerHTML=w.message,document.getElementById("email-label").style.color="red",document.getElementById("email").style.border="1px solid red",document.getElementById("is-valid-username").innerHTML="",document.getElementById("username-label").style.color="",void(document.getElementById("username").style.border=""))});const firstname=document.getElementById("firstname"),firstname_label=document.getElementById("firstname-label");firstname.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(firstname.setCustomValidity("Please enter a firstname without repeated letters."),firstname_label.style.color="red",firstname.style.border="1px solid red"):containSpecialCharacters(t)?(firstname.setCustomValidity("Firstname should not contains special characters."),firstname_label.style.color="red",firstname.style.border="1px solid red"):containNumbers(t)?(firstname.setCustomValidity("Firstname should not contains numbers."),firstname_label.style.color="red",firstname.style.border="1px solid red"):startInputContainSpace(t)?(firstname.setCustomValidity("Firstname should not start with space."),firstname_label.style.color="red",firstname.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(firstname.setCustomValidity("Firstname should not end with space."),firstname_label.style.color="red",firstname.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(firstname.setCustomValidity(""),firstname_label.style.color="",firstname.style.border=""):(firstname.setCustomValidity("Firstname must be capitalize"),firstname_label.style.color="red",firstname.style.border="1px solid red"):(firstname.setCustomValidity("Double spaces are not allowed."),firstname_label.style.color="red",firstname.style.border="1px solid red")});const middlename=document.getElementById("middlename"),middlename_label=document.getElementById("middlename-label");middlename.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(middlename.setCustomValidity("Please enter a middlename without repeated letters."),middlename_label.style.color="red",middlename.style.border="1px solid red"):containSpecialCharacters(t)?(middlename.setCustomValidity("Middlename should not contains special characters."),middlename_label.style.color="red",middlename.style.border="1px solid red"):containNumbers(t)?(middlename.setCustomValidity("Middlename should not contains numbers."),middlename_label.style.color="red",middlename.style.border="1px solid red"):startInputContainSpace(t)?(middlename.setCustomValidity("Middlename should not start with space."),middlename_label.style.color="red",middlename.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(middlename.setCustomValidity("Middlename should not end with space."),middlename_label.style.color="red",middlename.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(middlename.setCustomValidity(""),middlename_label.style.color="",middlename.style.border=""):(middlename.setCustomValidity("Middlename must be capitalize"),middlename_label.style.color="red",middlename.style.border="1px solid red"):(middlename.setCustomValidity("Double spaces are not allowed."),middlename_label.style.color="red",middlename.style.border="1px solid red")});const lastname=document.getElementById("lastname"),lastname_label=document.getElementById("lastname-label");lastname.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),lastname.setCustomValidity("Please enter a lastname without repeated letters."),lastname_label.style.color="red",lastname.style.border="1px solid red"):containSpecialCharacters(t)?(lastname.setCustomValidity("Lastname should not contains special characters."),lastname_label.style.color="red",lastname.style.border="1px solid red"):containNumbers(t)?(lastname.setCustomValidity("Lastname should not contains numbers."),lastname_label.style.color="red",lastname.style.border="1px solid red"):startInputContainSpace(t)?(lastname.setCustomValidity("Lastname should not start with space."),lastname_label.style.color="red",lastname.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(lastname.setCustomValidity("Lastname should not end with space."),lastname_label.style.color="red",lastname.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(lastname.setCustomValidity(""),lastname_label.style.color="",lastname.style.border=""):(lastname.setCustomValidity("Lastname must be capitalize"),lastname_label.style.color="red",lastname.style.border="1px solid red"):(lastname.setCustomValidity("Double spaces are not allowed."),lastname_label.style.color="red",lastname.style.border="1px solid red")});const suffix=document.getElementById("suffix"),suffix_label=document.getElementById("suffix-label");suffix.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),suffix.setCustomValidity("Please enter a suffix without repeated letters."),suffix_label.style.color="red",suffix.style.border="1px solid red"):containSpecialCharacters(t)?(suffix.setCustomValidity("Suffix should not contains special characters."),suffix_label.style.color="red",suffix.style.border="1px solid red"):containNumbers(t)?(suffix.setCustomValidity("Suffix should not contains numbers."),suffix_label.style.color="red",suffix.style.border="1px solid red"):startInputContainSpace(t)?(suffix.setCustomValidity("Suffix should not start with space."),suffix_label.style.color="red",suffix.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(suffix.setCustomValidity("Suffix should not end with space."),suffix_label.style.color="red",suffix.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(suffix.setCustomValidity(""),suffix_label.style.color="",suffix.style.border=""):(suffix.setCustomValidity("Suffix must be capitalize"),suffix_label.style.color="red",suffix.style.border="1px solid red"):(suffix.setCustomValidity("Double spaces are not allowed."),suffix_label.style.color="red",suffix.style.border="1px solid red")});const startInput=document.getElementById("birthdate");startInput.addEventListener("change",()=>{const e=new Date(startInput.value),t=new Date,l=Math.floor((t-e)/31536e6);return document.getElementById("age").value=l,isNaN(l)?(startInput.setCustomValidity("Invalid Birthdate."),startInput.style.border="1px solid red",void(document.getElementById("birthdate-label").style.color="red")):l<18?(startInput.setCustomValidity("You must be at least 18 years old to submit this form."),startInput.style.border="1px solid red",void(document.getElementById("birthdate-label").style.color="red")):void(l>100?startInput.setCustomValidity("You must be at least 100 years old below to submit this form."):(startInput.setCustomValidity(""),startInput.style.border="",document.getElementById("birthdate-label").style.color=""))});const mobilenumber=document.getElementById("mobilenum"),mobilenumber_label=document.getElementById("mobilenum-label");mobilenumber.addEventListener("input",e=>{var t=e.target.value;startInputContainSpace(t)?(mobilenumber.setCustomValidity("Mobile number should not start with space"),document.getElementById("mobilenum-label").style.color="red",document.getElementById("mobilenum").style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(mobilenumber.setCustomValidity("Mobile number should not end with space."),mobilenumber_label.style.color="red",mobilenumber.style.border="1px solid red"):containsLetters(t)?(mobilenumber.setCustomValidity("Mobile number don't contain strings. Please enter an mobile number value."),document.getElementById("mobilenum-label").style.color="red",document.getElementById("mobilenum").style.border="1px solid red"):validatePhilippineMobileNumber(t)?(mobilenumber.setCustomValidity(""),document.getElementById("mobilenum-label").style.color="",document.getElementById("mobilenum").style.border=""):(mobilenumber.setCustomValidity("Please enter a valid Philippine mobile number. e.g 639123456789 or 09123456789"),document.getElementById("mobilenum-label").style.color="red",document.getElementById("mobilenum").style.border="1px solid red")});const country=document.getElementById("country"),country_label=document.getElementById("country-label");country.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),country.setCustomValidity("Please enter a country without repeated letters."),country_label.style.color="red",country.style.border="1px solid red"):containSpecialCharacters(t)?(country.setCustomValidity("Country should not contains special characters."),country_label.style.color="red",country.style.border="1px solid red"):containNumbers(t)?(country.setCustomValidity("Country should not contains numbers."),country_label.style.color="red",country.style.border="1px solid red"):startInputContainSpace(t)?(country.setCustomValidity("Country should not start with space."),country_label.style.color="red",country.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(country.setCustomValidity("Country should not end with space."),country_label.style.color="red",country.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(country.setCustomValidity(""),country_label.style.color="",country.style.border=""):(country.setCustomValidity("Country must be capitalize"),country_label.style.color="red",country.style.border="1px solid red"):(country.setCustomValidity("Double spaces are not allowed."),country_label.style.color="red",country.style.border="1px solid red")});const province=document.getElementById("province"),province_label=document.getElementById("province-label");province.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),province.setCustomValidity("Please enter a province without repeated letters."),province_label.style.color="red",province.style.border="1px solid red"):containSpecialCharacters(t)?(province.setCustomValidity("Province should not contains special characters."),province_label.style.color="red",province.style.border="1px solid red"):containNumbers(t)?(province.setCustomValidity("Province should not contains numbers."),province_label.style.color="red",province.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(province.setCustomValidity("Province should not end with space."),province_label.style.color="red",province.style.border="1px solid red"):startInputContainSpace(t)?(province.setCustomValidity("Province should not start with space."),province_label.style.color="red",province.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(province.setCustomValidity(""),province_label.style.color="",province.style.border=""):(province.setCustomValidity("Province must be capitalize"),province_label.style.color="red",province.style.border="1px solid red"):(province.setCustomValidity("Double spaces are not allowed."),province_label.style.color="red",province.style.border="1px solid red")});const city=document.getElementById("city"),city_label=document.getElementById("city-label");city.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),city.setCustomValidity("Please enter a city or municipality without repeated letters."),city_label.style.color="red",city.style.border="1px solid red"):containSpecialCharacters(t)?(city.setCustomValidity("City or Municipality should not contains special characters."),city_label.style.color="red",city.style.border="1px solid red"):containNumbers(t)?(city.setCustomValidity("City or Municipality should not contains numbers."),city_label.style.color="red",city.style.border="1px solid red"):startInputContainSpace(t)?(city.setCustomValidity("City or Municipality should not start with space."),city_label.style.color="red",city.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(city.setCustomValidity("City or Municipality should not end with space."),city_label.style.color="red",city.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(city.setCustomValidity(""),city_label.style.color="",city.style.border=""):(city.setCustomValidity("City or Municipality must be capitalize"),city_label.style.color="red",city.style.border="1px solid red"):(city.setCustomValidity("Double spaces are not allowed."),city_label.style.color="red",city.style.border="1px solid red")});const purok=document.getElementById("purok"),purok_label=document.getElementById("purok-label");purok.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),purok.setCustomValidity("Please enter a purok without repeated letters."),purok_label.style.color="red",purok.style.border="1px solid red"):containSpecialCharacters(t)?(purok.setCustomValidity("Purok should not contains special characters."),purok_label.style.color="red",purok.style.border="1px solid red"):startInputContainSpace(t)?(purok.setCustomValidity("Purok should not start with space."),purok_label.style.color="red",purok.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(purok.setCustomValidity("Purok should not end with space."),purok_label.style.color="red",purok.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(purok.setCustomValidity(""),purok_label.style.color="",purok.style.border=""):(purok.setCustomValidity("Purok must be capitalize"),purok_label.style.color="red",purok.style.border="1px solid red"):(purok.setCustomValidity("Double spaces are not allowed."),purok_label.style.color="red",purok.style.border="1px solid red")});const barangay=document.getElementById("barangay"),barangay_label=document.getElementById("barangay-label");barangay.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),barangay.setCustomValidity("Please enter a barangay without repeated letters."),barangay_label.style.color="red",barangay.style.border="1px solid red"):containSpecialCharacters(t)?(barangay.setCustomValidity("Barangay should not contains special characters."),barangay_label.style.color="red",barangay.style.border="1px solid red"):startInputContainSpace(t)?(barangay.setCustomValidity("Barangay should not start with space."),barangay_label.style.color="red",barangay.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(barangay.setCustomValidity("Barangay should not end with space."),barangay_label.style.color="red",barangay.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(barangay.setCustomValidity(""),barangay_label.style.color="",barangay.style.border=""):(barangay.setCustomValidity("Barangay must be capitalize"),barangay_label.style.color="red",barangay.style.border="1px solid red"):(barangay.setCustomValidity("Double spaces are not allowed."),barangay_label.style.color="red",barangay.style.border="1px solid red")});const street=document.getElementById("street"),street_label=document.getElementById("street-label");street.addEventListener("input",e=>{var t=e.target.value;hasRepeatedLetters(t)?(console.log(t),street.setCustomValidity("Please enter a street without repeated letters."),street_label.style.color="red",street.style.border="1px solid red"):containSpecialCharacters(t)?(street.setCustomValidity("Street should not contains special characters."),street_label.style.color="red",street.style.border="1px solid red"):containNumbers(t)?(street.setCustomValidity("Street should not contains numbers."),street_label.style.color="red",street.style.border="1px solid red"):startInputContainSpace(t)?(street.setCustomValidity("Street should not start with space."),street_label.style.color="red",street.style.border="1px solid red"):validateOneSpaceAtTheEnd(t)?(street.setCustomValidity("Street should not end with space."),street_label.style.color="red",street.style.border="1px solid red"):validateOneSpacePerWord(t)?validateIfCapitalize(t)?(street.setCustomValidity(""),street_label.style.color="",street.style.border=""):(street.setCustomValidity("Street must be capitalize"),street_label.style.color="red",street.style.border="1px solid red"):(street.setCustomValidity("Double spaces are not allowed."),street_label.style.color="red",street.style.border="1px solid red")}),document.getElementById("zipcode").addEventListener("input",e=>{const t=document.getElementById("zipcode"),l=document.getElementById("zipcode-label"),a=e.target.value.trim(),r=parseInt(a);r<100||r>9811?(t.setCustomValidity("Please enter a valid ZIP code"),t.style.border="1px solid red",l.style.color="red"):isNaN(a)?(t.setCustomValidity("Please enter a valid ZIP code"),l.style.color="red",t.style.border="1px solid red"):(t.setCustomValidity(""),l.style.color="",t.style.border="")}),document.getElementById("password").addEventListener("input",e=>{var t=e.target.value,l=document.getElementById("password-strength");document.getElementById("is-valid-password").innerHTML="";var a=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}$/,r=a.test(t);t?r?(l.innerText="Password is Strong",l.style.color="green"):t.length>=8?(l.innerText="Password is Medium",l.style.color="#eeb600"):(l.innerText="Password is Weak",l.style.color="red"):l.innerText=""});const password=document.getElementById("password"),password_label=document.getElementById("password-label"),confirmPassword=document.getElementById("confirmpassword"),confirmPassword_label=document.getElementById("confirmpassword-label");password.addEventListener("input",e=>{var t=e.target.value;""===t?(password_label.style.color="",confirmPassword.style.border="",password_label.style.color="",password.style.border=""):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}$/.test(t)?t!==confirmPassword.value&&""!==confirmPassword.value?(confirmPassword.setCustomValidity("Please make sure your passwords match."),document.getElementById("is-valid-confirmpassword").innerHTML="Please make sure your passwords match.",password.style.border="1px solid red",password_label.style.color="red",confirmPassword_label.style.color="red",confirmPassword.style.border="1px solid red"):(confirmPassword.setCustomValidity(""),password.setCustomValidity(""),confirmPassword_label.style.color="",confirmPassword.style.border="",password_label.style.color="",password.style.border="",document.getElementById("is-valid-confirmpassword").innerHTML=""):(password.setCustomValidity("Password must contain at least one lowercase letter, one uppercase letter, one digit, one special character, and be at least 8 characters long."),password.style.border="1px solid red",password_label.style.color="red")}),confirmPassword.addEventListener("input",e=>{var t=e.target.value;""===t?(confirmPassword.setCustomValidity(""),password_label.style.color="",confirmPassword.style.border="",confirmPassword_label.style.color="",document.getElementById("is-valid-confirmpassword").innerHTML="",password.style.border=""):password.value!==t?(confirmPassword.setCustomValidity("Please make sure your passwords match."),document.getElementById("is-valid-confirmpassword").innerHTML="Please make sure your passwords match.",password_label.style.color="red",confirmPassword.style.border="1px solid red",confirmPassword_label.style.color="red",password.style.border="1px solid red"):(confirmPassword.setCustomValidity(""),document.getElementById("is-valid-confirmpassword").innerHTML="",password_label.style.color="",confirmPassword.style.border="",confirmPassword_label.style.color="",password.style.border="")}),document.getElementById("togglePassword").addEventListener("click",function(){var e=document.getElementById("password"),t="password"===e.getAttribute("type")?"text":"password";e.setAttribute("type",t),this.classList.toggle("fa-eye-slash")}),document.getElementById("toggleConfirmPassword").addEventListener("click",function(){var e=document.getElementById("confirmpassword"),t="password"===e.getAttribute("type")?"text":"password";e.setAttribute("type",t),this.classList.toggle("fa-eye-slash")});const button=document.getElementById("button"),username=document.getElementById("username"),username_label=document.getElementById("username-label");username.addEventListener("input",async e=>{var t=e.target.value;const l=await fetch(`/ajax/fetch.php?username=${t}`),a=await l.json();hasRepeatedLetters(t)?(username.setCustomValidity("Please enter a username without repeated letters."),username_label.style.color="red",username.style.border="1px solid red"):t.includes(" ")?(username.setCustomValidity("Username should not contains with spaces."),username_label.style.color="red",username.style.border="1px solid red"):a.ok?(username_label.style.color="red",username.style.border="1px solid red",button.disabled=!0,button.style.cursor="not-allowed",document.getElementById("is-valid-username").innerHTML=a.message):(username.setCustomValidity(""),username_label.style.color="",username.style.border="",button.style.cursor="",button.disabled=!1,document.getElementById("is-valid-username").innerHTML="")});const email=document.getElementById("email"),email_label=document.getElementById("email-label");document.getElementById("email").addEventListener("input",async e=>{var t=e.target.value;const l=await fetch(`/ajax/fetch.php?email=${t}`),a=await l.json();hasRepeatedLetters(t)?(email.setCustomValidity("Please enter a email without repeated letters."),email_label.style.color="red",email.style.border="1px solid red"):a.ok?(email_label.style.color="red",email.style.border="1px solid red",button.disabled=!0,document.getElementById("is-valid-email").innerHTML=a.message):a.ok||(email_label.style.color="",email.style.border="",button.style.cursor="",button.disabled=!1,document.getElementById("is-valid-email").innerHTML="")});